TypeScript предоставляет мощный инструмент для работы с типами, который не только улучшает читаемость и поддерживаемость кода, но и помогает предотвратить множество потенциальных ошибок на этапе разработки. Одним из интересных аспектов системы типов TypeScript является проверка на избыточные свойства (excess property checks), которая происходит, когда объекты присваиваются типам или передаются в качестве аргументов функций.

### Введение в проверку избыточных свойств

Примером может служить следующий код, где определен интерфейс `SquareConfig`, а функция `createSquare` использует этот интерфейс в качестве типа параметра:

```typescript
interface SquareConfig {
  color?: string;
  width?: number;
}

function createSquare(config: SquareConfig): { color: string; area: number } {
  return {
    color: config.color || "red",
    area: config.width ? config.width * config.width : 20,
  };
}
```

Если попытаться вызвать `createSquare`, передав объект с несуществующим в интерфейсе свойством, TypeScript выдаст ошибку:

```typescript
let mySquare = createSquare({ colour: "red", width: 100 });
// Ошибка: 'colour' не существует в типе 'SquareConfig'.
```

### Как TypeScript обрабатывает избыточные свойства

TypeScript особенно строг при работе с объектными литералами, прямо передаваемыми в функции или присваиваемыми типизированным переменным. Система типов предполагает, что наличие неожиданных свойств может указывать на потенциальные ошибки, например, опечатки или неправильное понимание структуры данных.

### Обходные пути

1. **Явное приведение типа**: Чтобы обойти проверку, можно использовать приведение типа: `tsx let mySquare = createSquare({ width: 100, opacity: 0.5 } as SquareConfig);`
2. **Использование сигнатуры индекса**: Если объект действительно может содержать дополнительные свойства, можно добавить сигнатуру индекса к интерфейсу: `tsx interface SquareConfig { color?: string; width?: number; [propName: string]: any; }`
3. **Переменная передачи**: Присваивание объекта сначала переменной, а затем передача этой переменной в функцию также может помочь: `tsx let squareOptions = { colour: "red", width: 100 }; let mySquare = createSquare(squareOptions);`

### Практические советы

Несмотря на наличие способов обхода проверок на избыточные свойства, важно помнить, что они предназначены для предотвращения ошибок. В большинстве случаев, если вы сталкиваетесь с ошибками из-за избыточных свойств, стоит пересмотреть определения ваших типов и убедиться, что они соответствуют используемым структурам данных.

Проверка на избыточные свойства в TypeScript — это не просто техническая особенность, а средство для обеспечения корректности и безопасности кода, что делает ее важным инструментом в арсенале разработчика.

[[https://purpleschool.ru/knowledge-base/article/excess-property-checks|Источник]]